<!DOCTYPE html>
<html>
	<head>
		<title>Add a Listing</title>
		<meta name="google-signin-client_id" content="58684548257-biadarc2qic8v5841bd06cblv1sddgbc.apps.googleusercontent.com">
	</head>
	    <script src="https://www.gstatic.com/firebasejs/5.5.8/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.5.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.5.8/firebase-storage.js"></script>
    <script>
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyCKuSvfoFNq-3SWfPKtK23p0NvZKjjtsLA",
        authDomain: "pergio-cs201.firebaseapp.com",
        databaseURL: "https://pergio-cs201.firebaseio.com",
        projectId: "pergio-cs201",
        storageBucket: "pergio-cs201.appspot.com",
        messagingSenderId: "648614633297"
      };
      firebase.initializeApp(config);

      const storageService = firebase.storage();
      const storageRef = storageService.ref();
    </script>
	<link rel="stylesheet" type="text/css" href="../css/style.css" />
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossorigin="anonymous"/>
	<script src="https://apis.google.com/js/platform.js" async defer></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="scripts.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@7.29.0/dist/sweetalert2.all.min.js"></script>


    <!-- ALL OTHER TAGS GO BELOW -->

    <script type="text/javascript">
      function uploadFile(file){
		console.log(file.name);
        const uploadTask = storageRef.child(`images/${file.name}`).put(file); //create a child directory called images, and place the file inside this directory
        uploadTask.on('state_changed', (snapshot) => {
          // Observe state change events such as progress, pause, and resume
        }, (error) => {
          // Handle unsuccessful uploads
          console.log(error);
        }, () => {
           // Do something once upload is complete
           uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL) {
             console.log(downloadURL);
           });
        });
      }
    </script>


	<body onload="newListingPageLoad()">
		<div id="outerContainer">
			<div class="header">
				<div class="icon" onClick="goToBrowse()"><img class="icon-image" src="../images/icon.png"/></div>
				<div class="search-bar"><input type="text" id="search" name="search" placeholder="Search..."></div>
				<div class="header-frame">
					<div class="header-text" style="visibility: hidden" onClick="showSavedItems()">Saved</div>
					<div class="header-text"><div onclick="window.location.href='./account.html'">Account</div></div>
				</div>
			</div>
			<div class="main">
				<div class="main-frame">
					<div class="browser-bar">
						<div class="browser-text">
                            <div class="title-text">Add a Listing</div>
                        </div>
					</div>
					<div class="inner-frame">
                        <form onsubmit="formSubmission(); return false;" id="new-listing-form" method="POST" ENCTYPE="multipart/form-data">
                            <input class="listing-input" type="text" name="title" placeholder="Title of your listing..." required>
                            <div class="radio-input">
<!--                                 <input onclick="handleClick(this);" class="listing-input" style="margin-left: 0px;" type="radio" name="buy-choice" value="buy it now" required> Buy It Now &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                <input onclick="handleClick(this);" class="listing-input" style="margin-left: 0px;" type="radio" name="buy-choice" value="bid"> Auction
 -->                            </div>
                            <textarea class="listing-input" style="border:1px solid #494949; border-radius: 15px;" rows="8" cols="70" name="description" placeholder="Description up to 500 words..." required></textarea>
                            <input class="listing-input" type="text" name="keywords" placeholder="Up to 5 keywords separated by [,]" required>
                            <input class="listing-input" id="zipcode" type="number" name="zipcode" required pattern="[0-9]{5}" min="000000" max="99999" placeholder="Zip Code..." onblur="getCityState();">
                            <div id="price-container">
                                <span class="listing-input">$</span>
                                <input id="price-field" class="listing-input" style="margin-left: 0px;" type="number" name="price" placeholder="Price..." step=".01" required>
                            </div>

                            <div id="picture-container">
                                <div class="new-item" id="upload-image">
                                    Upload an image
                                    <input type="file" name="myfile" multiple accept="image/jpeg, image/png" onchange="previewFile();" required>
                                </div>
                            </div>
                            <input id="new-listing-submit" class="listing-input" style="border:1px solid #494949; border-radius: 15px; width: 100px; color: #494949;" type="submit" value="submit">
                        </form>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>
